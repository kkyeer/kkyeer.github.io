(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{538:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ubuntu快捷方式-desktop文件-与开机自启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu快捷方式-desktop文件-与开机自启"}},[s._v("#")]),s._v(" Ubuntu快捷方式(.desktop文件)与开机自启")]),s._v(" "),t("blockquote",[t("p",[s._v("注：以下说明在Kubuntu下确认OK，理论上Ubuntu原生(Gnome)也类似")])]),s._v(" "),t("p",[s._v("KUbuntu的快捷方式主要是.desktop文件方式存储，影响"),t("strong",[s._v("搜索")]),s._v("，"),t("strong",[s._v("dock栏的快捷方式")]),s._v("，同时还可以设置开机自启")]),s._v(" "),t("h2",{attrs:{id:"desktop文件的路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#desktop文件的路径"}},[s._v("#")]),s._v(" .desktop文件的路径")]),s._v(" "),t("p",[s._v("KUbuntu的desktop文件主要在下面几个地方，在任何一个地方存在(包括符号链接)，均会被系统扫描")]),s._v(" "),t("ul",[t("li",[s._v("/usr/share/applications : 全局生效")]),s._v(" "),t("li",[s._v("~/.local/share/applications/ :一般情况下，此部分仅对对应用户生效")]),s._v(" "),t("li",[s._v("~/.config/autostart/:这个路径更多的是用来开机自启，但也有部分application是只定义在这里的，看各应用实现")])]),s._v(" "),t("h2",{attrs:{id:"desktop文件开机自启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#desktop文件开机自启"}},[s._v("#")]),s._v(" .desktop文件开机自启")]),s._v(" "),t("p",[s._v("如果上述路径里已有对应软件的.desktop文件，则仅需要在当前用户的配置文件夹新增一条"),t("strong",[s._v("符号链接")]),s._v("即可，下面为将 utools设为开机自启的实例")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/share/applications/utools.desktop ~/.config/autostart/utools.desktop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("ln -s")]),s._v("命令的一般用法为"),t("code",[s._v("ln -s 源文件路径 要新增的符号链接路径")])]),s._v(" "),t("h2",{attrs:{id:"手写-desktop文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手写-desktop文件"}},[s._v("#")]),s._v(" 手写.desktop文件")]),s._v(" "),t("p",[s._v("如果某软件并未自带.desktop文件，比如AppImage格式的App，则需要手写.desktop文件，基本方式也比较简单")]),s._v(" "),t("div",{staticClass:"language-desktop line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[Desktop Entry]\nType=Application  #不用改\nName=MyApp #显示名\nPath=/home/xxx/myapp/ #app路径\nExec=/home/xxx/myapp/Downloaded.AppImage #要执行的命令\nIcon=/home/xxx/myapp/Downloaded.png #icon图标\nCategories=Tools #开始菜单的分类\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"discover取消代理设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#discover取消代理设置"}},[s._v("#")]),s._v(" Discover取消代理设置")]),s._v(" "),t("p",[s._v("这个是有解决方案的，就是很费劲。Discover 和 pkcon 是依赖 packagekit 的，这玩意是用 sql 存储配置的（在 /var/lib/PackageKit/transactions.db），你设置系统代理在哪儿设置都行，packagekit 会把代理写到 sql 里，你改代理也行，但是删代理删不了")]),s._v(" "),t("p",[s._v("于是解决方案就是用 sqlitebrowser 自己去数据库的 proxy 表里删…删完重启 packagekit service…")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://forum.kde.org/viewtopic.php?f=309&t=161739",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://forum.kde.org/viewtopic.php?f=309&t=161739"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("想自动删可以给你写一个 systemd timer，每隔一段时间去看看有没有 proxy 要是没有就去清空 proxy 表")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/PackageKit/PackageKit/issues/392",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/PackageKit/PackageKit/issues/392"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" sqlite3\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" sqlite3 /var/lib/PackageKit/transactions.db\nDELETE FROM proxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n.exit\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart packagekit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);