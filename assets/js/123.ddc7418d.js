(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{559:function(s,a,t){"use strict";t.r(a);var e=t(2),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"git仓库使用指定私钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git仓库使用指定私钥"}},[s._v("#")]),s._v(" git仓库使用指定私钥")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/684059388",target:"_blank",rel:"noopener noreferrer"}},[s._v("全文引用"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("当不同的git库需要使用不同的private key的时候，可在运行git命令的时候指定私钥 private key。")]),s._v(" "),a("h2",{attrs:{id:"使用ssh配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用ssh配置文件"}},[s._v("#")]),s._v(" 使用SSH配置文件")]),s._v(" "),a("p",[s._v("我们可以通过SSH配置文件来指定在git clone过程中使用特定的私钥。")]),s._v(" "),a("p",[s._v("具体来说，我们可以在~/.ssh/config文件中为不同的私钥创建两个单独的主机。然后，在git clone期间，根据我们想要使用的密钥，我们可以在SSH连接字符串中指定不同的主机。")]),s._v(" "),a("p",[s._v("如：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.ssh/config\n Host github-work\n     HostName github.com\n     IdentityFile ~/.ssh/id_rsa_work\n ​\n Host github-personal\n     HostName github.com\n     IdentityFile ~/.ssh/id_rsa_personal\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("现在，可以通过id_rsa_work私钥访问的存储库上运行git clone命令，我们可以使用github-work作为其主机来指定SSH连接字符串。")]),s._v(" "),a("p",[s._v("如：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@github-work:corporateA/webapp.git\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@github-personal:bob/blog.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"使用core-sshcommand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用core-sshcommand"}},[s._v("#")]),s._v(" 使用core.sshCommand")]),s._v(" "),a("p",[s._v("Git仓库提供了一个可配置的选项core.sshCommand。当运行任何需要SSH隧道的命令时，此配置将覆盖默认的SSH命令。")]),s._v(" "),a("p",[s._v("配置 core.sshCommand")]),s._v(" "),a("p",[a("code",[s._v('git clone -c "core.sshCommand=ssh -i ~/.ssh/id_rsa_work" <git@github.com>:corporateA/webapp.git')]),s._v("\n以上例子中，使用-c选项在运行时覆盖core.sshCommand。具体来说，我们使用-i选项将SSH命令更改为指向我们想要使用的私钥。")]),s._v(" "),a("p",[s._v("在存储库级别上持久化core.sshCommand")]),s._v(" "),a("p",[s._v("我们可以使用git config命令将配置覆盖持久化到存储库级别，而不是每次重复配置覆盖")]),s._v(" "),a("p",[a("code",[s._v('git config core.sshCommand "ssh -i ~/.ssh/id_rsa_work"')])]),s._v(" "),a("p",[s._v("该命令将core.sshCommand配置持久化到仓库中。这意味着Git将在后续的调用中使用该SSH命令。")]),s._v(" "),a("p",[s._v("可以使用以下命令验证是否配置成功")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" $ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--get")]),s._v(" core.sshCommand\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ~/.ssh/id_rsa_work\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);