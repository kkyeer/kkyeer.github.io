<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JDK源码-ForkJoinPool | 一水轩</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/kkyeer/picbed/favicon_coder.ico">
    <meta name="description" content="Born for code">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/css/0.styles.fa0fed33.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/app.50ab6303.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/4.6e926aae.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/1.19c6f97d.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/49.daf61b50.js" as="script"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/10.a2d3e584.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/100.c4d716d3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/101.813f7b6f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/102.caa78e54.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/103.e39be219.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/104.f5c5644f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/105.ee07e03f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/106.07fb729d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/107.eb7d9551.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/108.70be2f78.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/109.754c6ff5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/11.3baa7054.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/110.95d57e7d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/111.840d208c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/112.72061898.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/113.3b2b3877.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/114.850b262e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/115.b5306277.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/116.63bb2d1a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/117.4267b892.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/118.df6668a5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/119.04bd0133.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/12.da83fb48.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/120.aa16854d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/121.f92969d1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/122.e2b9ee48.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/123.1c6c8a93.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/124.7bfe8cb3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/125.34957fc1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/126.9105ebdd.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/127.43a27b3d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/128.910202b9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/129.8ff8a0e2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/13.e1ded619.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/130.08eef21d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/131.af73e7cc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/132.84a3b302.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/133.a586a760.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/134.1525cbf6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/14.c1a3aa86.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/15.88e4958b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/16.ce2ba6ea.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/17.d6d05316.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/18.179ac3de.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/19.fa2afcfb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/20.afdf466d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/21.b716d1a2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/22.760f4854.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/23.925b61af.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/24.319ecf37.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/25.f77698ff.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/26.f4a2d1b1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/27.59e3516d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/28.e207dc3d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/29.74424bb8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/30.449d28d7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/31.44369d7c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/32.87427194.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/33.360cdf96.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/34.1b821c53.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/35.d30bc00d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/36.f92c5562.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/37.c872f3dc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/38.f76bf903.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/39.39d6e70a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/40.38150871.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/41.6ddc93ae.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/42.1c00a496.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/43.b7ab65cd.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/44.12cf5686.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/45.53b73021.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/46.7cb21f17.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/47.05ea17e7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/48.389e7259.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/5.82af2362.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/50.912b6f7a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/51.0bd402d1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/52.d369e0f7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/53.31d851a9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/54.01eb0b5f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/55.d6f8d9de.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/56.e95eac19.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/57.934a0138.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/58.73dce3e1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/59.6951c216.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/6.e31e860b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/60.cfd7bf1c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/61.36df864c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/62.5ef83f0b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/63.06350a88.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/64.18460a61.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/65.7ef15b71.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/66.f8502636.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/67.cbac56a4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/68.453bc747.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/69.64cf7c3e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/7.8c06fd14.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/70.276f3fd8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/71.76175225.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/72.0a27d0b3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/73.e58c0872.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/74.65aac751.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/75.77ad89c3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/76.c6ce94c2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/77.aedae7eb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/78.413e82f9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/79.4ce7e132.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/8.31c8a8a0.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/80.a43e9508.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/81.9c321bf8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/82.68af0f25.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/83.3476cd9f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/84.9a5e2865.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/85.5952d391.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/86.17aca04f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/87.e8bf1b83.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/88.06e55dcf.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/89.80b12799.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/9.cf5ba299.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/90.77476549.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/91.d8d22988.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/92.ff339273.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/93.54866781.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/94.9b20d5b9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/95.01495599.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/96.fb3a9083.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/97.e59c1e20.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/98.b02699ae.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/99.409150db.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/vendors~flowchart.7dc40914.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/css/0.styles.fa0fed33.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>一水轩</h3> <p class="description" data-v-59e6cb88>Born for code</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>kkyeer</span>
          
        <span data-v-59e6cb88>2019 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/kkyeer/picbed/avatar_coder.png" alt="一水轩" class="logo"> <span class="site-name">一水轩</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>服务端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/JDK源码/" class="nav-link"><i class="undefined"></i>
  JDK源码
</a></li><li class="dropdown-subitem"><a href="/categories/JVM/" class="nav-link"><i class="undefined"></i>
  JVM
</a></li><li class="dropdown-subitem"><a href="/categories/Java进阶/" class="nav-link"><i class="undefined"></i>
  Java进阶
</a></li><li class="dropdown-subitem"><a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li></ul></li><li class="dropdown-item"><h4>中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-subitem"><a href="/categories/Dubbo/" class="nav-link"><i class="undefined"></i>
  Dubbo
</a></li><li class="dropdown-subitem"><a href="/categories/Redis/" class="nav-link"><i class="undefined"></i>
  Redis
</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/JS/" class="nav-link"><i class="undefined"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/categories/前端DevOps/" class="nav-link"><i class="undefined"></i>
  前端DevOps
</a></li></ul></li><li class="dropdown-item"><h4>问题解决</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/线上问题/" class="nav-link"><i class="undefined"></i>
  线上问题
</a></li><li class="dropdown-subitem"><a href="/categories/开发问题/" class="nav-link"><i class="undefined"></i>
  开发问题
</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/懂/" class="nav-link"><i class="undefined"></i>
  懂
</a></li><li class="dropdown-subitem"><a href="/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/kkyeer" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/d42f2ae217ce" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="https://cdn.jsdelivr.net/gh/kkyeer/picbed/avatar_coder.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    kkyeer
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>94</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>72</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>服务端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/JDK源码/" class="nav-link"><i class="undefined"></i>
  JDK源码
</a></li><li class="dropdown-subitem"><a href="/categories/JVM/" class="nav-link"><i class="undefined"></i>
  JVM
</a></li><li class="dropdown-subitem"><a href="/categories/Java进阶/" class="nav-link"><i class="undefined"></i>
  Java进阶
</a></li><li class="dropdown-subitem"><a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li></ul></li><li class="dropdown-item"><h4>中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-subitem"><a href="/categories/Dubbo/" class="nav-link"><i class="undefined"></i>
  Dubbo
</a></li><li class="dropdown-subitem"><a href="/categories/Redis/" class="nav-link"><i class="undefined"></i>
  Redis
</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/JS/" class="nav-link"><i class="undefined"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/categories/前端DevOps/" class="nav-link"><i class="undefined"></i>
  前端DevOps
</a></li></ul></li><li class="dropdown-item"><h4>问题解决</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/线上问题/" class="nav-link"><i class="undefined"></i>
  线上问题
</a></li><li class="dropdown-subitem"><a href="/categories/开发问题/" class="nav-link"><i class="undefined"></i>
  开发问题
</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/懂/" class="nav-link"><i class="undefined"></i>
  懂
</a></li><li class="dropdown-subitem"><a href="/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/kkyeer" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/d42f2ae217ce" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>kkyeer</span>
          
        <span data-v-59e6cb88>2019 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">JDK源码-ForkJoinPool</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>kkyeer</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>11/8/2021</span></i> <i class="iconfont reco-eye" data-v-8a445198><span id="/views/java/jdk/java.util/concurrent/forkjoinpool/ForkJoinPool.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-8a445198><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>源码</span><span class="tag-item" data-v-8a445198>并发</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="jdk源码-forkjoinpool"><a href="#jdk源码-forkjoinpool" class="header-anchor">#</a> JDK源码-ForkJoinPool</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <ul><li>ForkJoinPool的特点：work-stealing，优势
<ul><li>一个task可以fork其他subtask</li> <li>许多小task提交到线程池</li> <li>线程池参数:asyncMode =true????</li> <li>事件驱动的task，不join的时候</li></ul></li> <li>commonPool():动态回收和创建线程</li> <li>parallelism level:默认等于number of available processors???</li> <li>理论上会动态增加/休眠/恢复线程，但是BIO情况下无法保证：ForkJoinPool.ManagedBlocker？？？</li> <li>调用形式</li></ul> <p>s is the case with other ExecutorServices, there are three main task execution methods summarized in the following table. These are designed to be used primarily by clients not already engaged in fork/join computations in the current pool. The main forms of these methods accept instances of ForkJoinTask, but overloaded forms also allow mixed execution of plain Runnable- or Callable- based activities as well. However, tasks that are already executing in a pool should normally instead use the within-computation forms listed in the table unless using async event-style tasks that are not usually joined, in which case there is little difference among choice of methods.？？？？？？？？</p> <table><thead><tr><th>场景</th> <th>客户端call</th> <th>内部计算</th></tr></thead> <tbody><tr><td>Arrange async execution</td> <td>execute(ForkJoinTask)</td> <td>ForkJoinTask.fork</td></tr> <tr><td>Arrange exec and obtain Future</td> <td>submit(ForkJoinTask)</td> <td>ForkJoinTask.fork (ForkJoinTasks are Futures)</td></tr> <tr><td>Await and obtain result</td> <td>invoke(ForkJoinTask)</td> <td>ForkJoinTask.invoke</td></tr></tbody></table> <ul><li>fjp的commonPool参数可以由system properties指定</li></ul> <blockquote><p>implementation Overview</p></blockquote> <ul><li>有多个queue？？？</li> <li>每个queue的动作只允许owning线程执行:push,pop,pull(或者上锁)</li> <li>每个线程有自己的任务queue，或者从其他线程steal</li> <li>线程池本身创建、激活、注销、阻塞、terminate 线程，依靠非中心化信息</li> <li>ctl变量存储了各种信息，id count negation</li> <li>runState变量存储状态位</li> <li>!!runstate在高度竞争的情况下，使用wait/notify来唤醒，有性能问题</li> <li>scanState被worker和pool用来标识是否active，<strong>低16位表示此worker在pool的index</strong></li> <li>work-stealing的核心操作,出队列-设置状态</li> <li>memory ordering!!!!volatile的base变量，and always read it before other fields.The owner thread must ensure ordered updates, so writes use ordered intrinsics unless they can piggyback on those for other writes. ???这里具体在代码怎么体现的</li> <li>FJP里构建线程：ThreadFactory返回null则忽略，只是少个线程。如果抛异常，会抛出</li> <li>worker不活跃的放到wait queue（等待被唤醒）。队列的问题，一个producer线程，看不到处于暂态的worker(这个worker不在steal，但是没有进入wait queue）.解决方案：scanners compute checksums of queue states during sweeps.Workers give up and try to deactivate only after the sum is stable across scans.</li> <li>join的处理:joiner线程直接执行,或者补偿</li> <li>join的处理:每个worker的currentSteal记录了最近steal的任务,currentJoin记录了在join的task</li> <li>join的处理:对于补偿(compensation),老版本是立即补偿(即时一个线程因为gc而block),但是效果不好,原因是大部分情况下这些gc都是正常的</li> <li>因为线程在准备销毁时就-1了,所以实际的线程数可能(在有线程被销毁中)偶尔超过限制</li> <li>外部线程提交到common pool的时候,即使join了,也可以进行子线程处理,不然这些提交者等待完成时会被block,所以在不适用的场景下,额外的工作(这些工作是通过通过大量稀疏的状态检查实现的) 相当于ForkJoinTask.Join之前自旋等待的另外一种奇怪的表现形式</li></ul> <h2 id="动态调整线程状态-数量"><a href="#动态调整线程状态-数量" class="header-anchor">#</a> 动态调整线程状态/数量</h2></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/25/2023, 5:54:12 AM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/views/java/jdk/java.util/concurrent/forkjoinpool/ForkJoinPool.html#简介" class="sidebar-link reco-side-简介" data-v-b57cc07c>简介</a></li><li class="level-2" data-v-b57cc07c><a href="/views/java/jdk/java.util/concurrent/forkjoinpool/ForkJoinPool.html#动态调整线程状态-数量" class="sidebar-link reco-side-动态调整线程状态-数量" data-v-b57cc07c>动态调整线程状态/数量</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/app.50ab6303.js" defer></script><script src="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/4.6e926aae.js" defer></script><script src="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/1.19c6f97d.js" defer></script><script src="https://cdn.jsdelivr.net/gh/kkyeer/kkyeer.github.io@gh-pages/assets/js/49.daf61b50.js" defer></script>
  </body>
</html>
